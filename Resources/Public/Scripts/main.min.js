function buildFromToString(datum,von,bis){var datestring="",lang="de-DE";return datum.match(/^(0?[1-9]|[12][0-9]|3[01])\.(0?[1-9]|1[012])\.\d{4}$/)&&von.match(/^(0?[0-9]|1[0-9]|2[0-4]):(0?[0-9]|[1-5][0-9]):(0?[0-9]|[1-5][0-9])$/)&&bis.match(/^(0?[0-9]|1[0-9]|2[0-4]):(0?[0-9]|[1-5][0-9]):(0?[0-9]|[1-5][0-9])$/)?(datum=datum.split("."),von=von.split(":"),bis=bis.split(":"),von=new Date(datum[2],datum[1]-1,datum[0],von[0],von[1],von[2],0),bis=new Date(datum[2],datum[1]-1,datum[0],bis[0],bis[1],bis[2],0),"function"==typeof von.toLocaleString?(datestring+=von.toLocaleString(lang,{weekday:"short",year:"numeric",month:"numeric",day:"numeric"}),datestring+=" von "+von.toLocaleString(lang,{hour:"numeric",minute:"numeric"}),datestring+=" bis "+bis.toLocaleString(lang,{hour:"numeric",minute:"numeric"}),datestring+=" Uhr"):(datestring+=von.toLocaleDateString(lang),datestring+=" von "+von.toLocaleTimeString(lang),datestring+=" bis "+bis.toLocaleTimeString(lang),datestring+=" Uhr"),datestring):void 0}function displayEvents(container,xml,options){options=options||{};var table=$("<table>");$(xml).find("lehrgang").each(function(index){if("number"==typeof options.maxEvents&&options.maxEvents>0&&index>=options.maxEvents)return!1;var lehrgang=$(this),tr=$("<tr>"),lehrgangstyp=lehrgang.find("lehrgangstyp bezeichnung").text(),ausbildungsort=lehrgang.find("ausbildungsort"),ort=ausbildungsort.find("plz").text()+" "+ausbildungsort.find("ort").text(),adresse=ausbildungsort.find("adresse").text(),gebuehr=lehrgang.find("tn_gebuehr").text(),plaetze=lehrgang.find("freie_plaetze").text();plaetze=parseInt(plaetze),plaetze=!isNaN(plaetze)&&plaetze>0?plaetze:0,options.bezeichnung&&$("<td>").addClass("bezeichnung").text(lehrgangstyp).appendTo(tr);var details=[],termine=lehrgang.find("termine termin");termine.each(function(){var termin=$(this),datum=termin.find("datum").text(),von=termin.find("uhrzeit_von").text(),bis=termin.find("uhrzeit_bis").text();details.push('<span class="fromTo">'+buildFromToString(datum,von,bis)+"</span>")}),details.push('<span class="ort">'+ort+", "+adresse+"</span>"),0===plaetze?details.push('<span class="plaetze">Leider sind alle Plätze vergeben.</small>'):details.push('<span class="preis">Preis: <em>'+gebuehr+'€</em>,</span> <span class="plaetze">Freie Plätze: <em>'+plaetze+"</em></span>"),$("<td>").html(details.join("<br />")).appendTo(tr);var url=lehrgang.find("url_anmeldung").text();if(url){var link=$("<a>");link.text("Anmelden"),link.attr("href",url),link.attr("target","_blank"),$("<td>").append(link).appendTo(tr)}else $("<td>").appendTo(tr);tr.attr("data-plaetze",plaetze),tr.appendTo(table)}),container.empty(),table.find("tr").length>0?container.append(table):container.append("<p>(Keine Kurstermine gefunden)</p>")}function formToObject(form){form=form||$("form").first();var obj={};return form.find(".form-group").each(function(){var group=$(this),label=group.find(".control-label")||group.find("label");if(label){label=label.first().text();var inputs={};group.find("input, textarea").each(function(){var input=$(this),name=input.attr("name"),value=input.val();name&&value&&(inputs[name]=value)}),obj[label]=inputs}}),obj}var drk=drk||{};if(drk.config={facebookUrl:"https://facebook.com/drkTettnang",piwikUrl:"/piwik/"},$(".events").each(function(){var dom=$(this),options={bezeichnung:dom.data("bezeichnung")||!1,maxEvents:dom.data("maxevents")||0,url:dom.data("url")},params={Lic:dom.data("lic"),XML:"J",LgTyp:dom.data("lgtyp")||"0",Mon:"number"==typeof dom.data("mon")&&dom.data("mon")>=0?dom.data("mon"):"",Ort:"string"==typeof dom.data("location")?dom.data("location"):""};options.url&&(dom.html("<p>(Lade Kurstermine)</p>"),options.url+="?"+$.param(params),$.ajax({url:options.url,method:"GET",dataType:"xml",success:function(xml){displayEvents(dom,xml,options)},error:function(){console.log("error",arguments),dom.html("<p>(Termine konnten nicht geladen werden)</p>")}}))}),drk&&drk.config&&drk.config.piwikUrl){var currentUser=window.location.pathname.replace(/.+@user-([a-z]+)\.html/i,"$1");currentUser=currentUser!==window.location.pathname?currentUser:null;var _paq=_paq||[];"string"==typeof drkException&&"notFoundExceptions"===drkException&&_paq.push(["setDocumentTitle","404/URL = "+encodeURIComponent(document.location.pathname+document.location.search)+"/From = "+encodeURIComponent(document.referrer)]),_paq.push(["trackPageView"]),_paq.push(["enableLinkTracking"]),function(){var u=drk.config.piwikUrl;u.match(/^(http|\/\/)/)||(u.match(/^\//)&&(u="/"+u),u="//"+window.location.host+u),currentUser&&_paq.push(["setUserId",currentUser]),_paq.push(["setTrackerUrl",u+"piwik.php"]),_paq.push(["setSiteId",1]);var d=document,g=d.createElement("script"),s=d.getElementsByTagName("script")[0];g.type="text/javascript",g.async=!0,g.defer=!0,g.src=u+"piwik.js",s.parentNode.insertBefore(g,s)}()}var socialUri;drk&&drk.config&&drk.config.facebookUrl&&(socialUri=function(){return drk.config.facebookUrl}),$("#socialmedia").socialSharePrivacy({css_path:"",lang_path:"/_Resources/Static/Packages/DRKTettnang.Homepage/Vendor/socialshareprivacy/lang/",language:"de",uri:socialUri,services:{facebook:{action:"like",perma_option:"off",dummy_img:"/_Resources/Static/Packages/DRKTettnang.Homepage/Vendor/socialshareprivacy/images/dummy_facebook_like.png"},twitter:{status:"off"},gplus:{perma_option:"off",dummy_img:"/_Resources/Static/Packages/DRKTettnang.Homepage/Vendor/socialshareprivacy/images/dummy_gplus.png"}}}),window.___gcfg={lang:"de"},$("#main-sidebar>*").width($("#main-sidebar").width()+"px"),$(window).resize(function(){$("#main-sidebar>*").width($("#main-sidebar").width()+"px")}),$("#main-content").height()>$("#main-sidebar").height()&&$("#main-sidebar > .inner").affix({offset:{top:$("#main-sidebar > .inner").offset().top,bottom:$("footer").outerHeight(!0)+30}}),$('[data-toggle="tooltip"]').not("input").tooltip(),$('input[data-toggle="tooltip"]').tooltip({placement:"bottom",trigger:"focus"}),$("body").hasClass("neos-backend")?$('a[href$=".jpg"]:has(img)').each(function(){$(this).attr("href","#")}):($('a[href$=".jpg"]:has(img)').not(".images a").magnificPopup({type:"image"}),$(".images").each(function(){$(this).magnificPopup({delegate:"a",type:"image",gallery:{enabled:!0}})})),$(".gallery").each(function(){var r,self=$(this),a=self.find("a"),n=a.length,w=self.innerWidth(),small=!1;for(i=1;i<=n;i++)if(r=i,Math.abs(w/i-100)<20){small=!0;break}a.css("width",100/r-1+"%"),a.css("marginRight","1%"),a.slice(-1*(n%r)).css("width",100/(n%r)-1+"%"),a.each(function(){var self=$(this);self.width()>240&&self.attr("data-bg-url-large")?self.css("backgroundImage","url("+self.attr("data-bg-url-large")+")"):self.width()>120&&self.attr("data-bg-url-medium")&&self.css("backgroundImage","url("+self.attr("data-bg-url-medium")+")")})}),$("[data-edon][data-niamod]").each(function(){var href="mailto:";href+=$(this).attr("data-edon"),href+="@",href+=$(this).attr("data-niamod"),$(this).attr("href",href)}),$(".cache input").each(function(){var input=$(this),key=window.location.pathname+"#"+input.attr("name"),saved=localStorage.getItem(key);saved&&input.val(saved)}),$(".cache input").change(function(){var input=$(this),key=window.location.pathname+"#"+input.attr("name");localStorage.setItem(key,input.val())}),$("form").on("reset",function(){var form=$(this);setTimeout(function(){form.find("input").change()},500)}),$(".printOnClick").click(function(){window.print()}),$("button.reset").length&&$('button[type="reset"]').length&&($("button.reset").show(),$('button[type="reset"]').hide(),$("button.reset").click(function(){return $("body").click(function(){$("button.reset").show(),$('button[type="reset"]').hide()}),$(this).button("reset"),setTimeout(function(){$("button.reset").hide(),$('button[type="reset"]').show()},200),!1}),$('button[type="reset"]').removeClass("btn-default").addClass("btn-danger").each(function(){$(this).text($(this).attr("data-value"))})),$(".time").clockpicker({donetext:"Fertig",minutestep:5,autoclose:!0}),$(".date input").datepicker({format:"dd.mm.yyyy",weekStart:1,startDate:"today",language:"de",calendarWeeks:!0,autoclose:!0,todayHighlight:!0});
//# sourceMappingURL=main.min.js.map